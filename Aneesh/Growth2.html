<!DOCTYPE html>
<html>
<head>
    <title>Solow Diagram Simulation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
</head>
<body>
    <nav style="text-align: right;">
        <a href="index.html" style="color: white;">Home</a>
    </nav>
    
    <h1>SOLOW DIAGRAM SIMULATION</h1>
    <div id="chart" style="display: inline-block;"></div>
    <div id="inputs" style="display: inline-block; vertical-align: top; margin-left: 20px;">
        <div>
            <label for="alpha">Alpha (\(\alpha\)):</label>
            <input type="number" id="alpha" min="0" max="1" step="0.01" value="0.3">
        </div>
        <div>
            <label for="K">Capital (K):</label>
            <input type="number" id="K" min="1" max="5" step="1" value="2">
        </div>
        <div>
            <label for="L">Labor (L):</label>
            <input type="number" id="L" min="1" max="100" step="1" value="10">
        </div>
        <div>
            <label for="w">Wage Rate (w):</label>
            <input type="number" id="w" min="10" max="25" step="0.01" value="15">
        </div>
        <div>
            <label for="s">Savings Rate (s):</label>
            <input type="number" id="s" min="1" max="100" step="1" value="20">
        </div>
        <div>
            <label for="n">Population Growth Rate (n):</label>
            <input type="number" id="n" min="1" max="35" step="1" value="10">
        </div>
    </div>
    <div id="equations" style="margin-top: 20px;">
        <h2>Equations</h2>
        <p>Cobb-Douglas production function: \(Y = K^{\alpha}L^{1-\alpha}\)</p>
        <p>Output per worker: \(y = \frac{Y}{L}\)</p>
        <p>Capital per worker: \(k = \frac{K}{L}\)</p>
        <p>Capital accumulation equation: \(\dot{k} = sy - (n + \delta)k\)</p>
        <p>Steady-state condition: \(sk^{\alpha} = (n + \delta)k\)</p>
    </div>
    
    <div id="explanation" style="margin-top: 40px;">
        <h2>Understanding the Solow Model</h2>
        <ol>
            <li>
                <p>The Solow model is a neoclassical growth model that describes the sources of economic growth and the factors that determine the steady-state levels of capital, output, and consumption per worker.</p>
            </li>
            <li>
                <p>Steady state: In the steady state, the capital stock and output per worker are constant over time. This occurs when the investment per worker curve (sk^α) intersects the 45-degree line ((n + δ)k).</p>
            </li>
            <li>
                <p>Capital deepening: If the investment per worker curve (sk^α) lies above the 45-degree line ((n + δ)k), the economy is experiencing capital deepening, where the capital stock per worker is increasing over time.</p>
            </li>
            <li>
                <p>Capital widening: If the investment per worker curve (sk^α) lies below the 45-degree line ((n + δ)k), the economy is experiencing capital widening, where the capital stock per worker is decreasing over time.</p>
            </li>
            <li>
                <p>Interpreting the values:
                    <ul>
                        <li>k: Capital per worker</li>
                        <li>y: Output per worker</li>
                        <li>α (alpha): The output elasticity of capital, representing the percentage change in output for a given percentage change in capital input</li>
                        <li>s: The savings rate, determining the fraction of output invested in capital formation</li>
                        <li>n: The population growth rate, affecting the growth rate of the labor force</li>
                        <li>δ (delta): The depreciation rate of capital</li>
                    </ul>
                </p>
            </li>
            <li>
                <p>Example: Suppose an economy has α = 0.3, K = 3, L = 20, w = 18, s = 25%, and n = 5%. With these values, the steady-state output per worker (y) is approximately 1.45, and the steady-state capital per worker (k) is around 2.9. If the capital per worker is below 2.9, the economy will experience capital deepening until it reaches the steady state.</p>
            </li>
        </ol>
    </div>

    <script>
        const margin = { top: 40, right: 40, bottom: 60, left: 60 };
        const width = 800 - margin.left - margin.right;
        const height = 600 - margin.top - margin.bottom;
        const transitionDuration = 2000; // 2 seconds transition duration

        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`);

        const xScale = d3.scaleLinear()
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .range([height, 0]);

        const xAxis = d3.axisBottom(xScale);
        const yAxis = d3.axisLeft(yScale);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", `translate(0, ${height})`)
            .call(xAxis);

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis);


        svg.append("text")
            .attr("x", width / 2)
            .attr("y", height + margin.bottom - 10)
            .style("text-anchor", "middle")
            .text("Capital per Worker (k)");

        svg.append("text")
            .attr("x", -height / 2)
            .attr("y", -margin.left + 20)
            .attr("transform", "rotate(-90)")
            .style("text-anchor", "middle")
            .text("Output per Worker (y)");

            const productioncurve = d3.line()
                .x(d => xScale(d.k))
                .y(d => yScale(d.y));

            const investmentcurve = d3.line()
                .x(d => xScale(d.k))
                .y(d => yScale(d.s));

            const steadystatecurve = d3.line()
                .x(d => xScale(d.k))
                .y(d => yScale(d.n_delta));

            const updateChart = () => {
            const alpha = parseFloat(d3.select("#alpha").property("value"));
            const K = parseInt(d3.select("#K").property("value"));
            const L = parseInt(d3.select("#L").property("value"));
            const w = parseFloat(d3.select("#w").property("value"));
            const s = parseFloat(d3.select("#s").property("value")) / 100;
            const n = parseFloat(d3.select("#n").property("value")) / 100;
            const delta = 0.05;
            const r = 125;

            const Y = Math.pow(K, alpha) * Math.pow(L, 1 - alpha);
            const y = Y / L;
            const k = K / L;
            const k_dot = s * y - (n + delta) * k;

            const data = [];
            const k_range = d3.range(0.01, 5.01, 0.01);

            k_range.forEach(k_value => {
                const y_value = Math.pow(k_value, alpha);
                const s_value = s * Math.pow(k_value, alpha);
                const n_delta_value = (n + delta) * k_value;
                data.push({ k: k_value, y: y_value, s: s_value, n_delta: n_delta_value });
            });

            xScale.domain(d3.extent(data, d => d.k));
            yScale.domain([0, d3.max(data, d => Math.max(d.y, d.s, d.n_delta)) * 1.2]);

            svg.select(".x.axis")
                .transition()
                .duration(transitionDuration)
                .call(xAxis);
            
            svg.select(".y.axis")
                .transition()
                .duration(transitionDuration)
                .call(yAxis);


        const prodcurvePath = svg.selectAll(".prodcurve")
            .data([data])
            .join("path")
            .attr("class", "line prodcurve")
            .attr("d", productioncurve)
            .attr("stroke", "steelblue")
            .attr("fill", "none")
            .transition()
            .duration(transitionDuration)
            .attrTween("d", function (d) {
                const previous = d3.select(this).attr("d");
                const current = productioncurve(d);
                return d3.interpolatePath(previous, current);
           });

           const investcurvePath = svg.selectAll(".investcurve")
            .data([data])
            .join("path")
            .attr("class", "line investcurve")
            .attr("d", investmentcurve)
            .attr("stroke", "green")
            .attr("fill", "none")
            .transition()
            .duration(transitionDuration)
            .attrTween("d", function (d) {
                const previous = d3.select(this).attr("d");
                const current = investmentcurve(d);
                return d3.interpolatePath(previous, current);
           });

           const steadystatePath = svg.selectAll(".steadystate")
            .data([data])
            .join("path")
            .attr("class", "line steadystate")
            .attr("d", steadystatecurve)
            .attr("stroke", "red")
            .attr("fill", "none")
            .transition()
            .duration(transitionDuration)
            .attrTween("d", function (d) {
                const previous = d3.select(this).attr("d");
                const current = steadystatecurve(d);
                return d3.interpolatePath(previous, current);
           });

           const currentK = svg.selectAll(".currentK")
            .data([{ k: k }])
            .join("line")
            .attr("class", "currentK")
            .attr("x1", d => xScale(d.k))
            .attr("x2", d => xScale(d.k))
            .attr("y1", 0)
            .attr("y2", height)
            .attr("stroke", "black")
            .attr("stroke-dasharray", "5,5")
            .transition()
            .duration(transitionDuration)
            .attr("x1", d => xScale(d.k))
            .attr("x2", d => xScale(d.k));

            const annotation = svg.selectAll(".annotation")
            .data([{ k: k, k_dot: k_dot }])
            .join("text")
            .attr("class", "annotation")
            .attr("x", width * 0.1)
            .attr("y", height * 0.9)
            .text(d => {
                if (d.k_dot > 0) {
                    return "Capital deepening";
                } else if (d.k_dot < 0) {
                    return "Capital widening";
                } else {
                    return "Steady state";
                }
            });
   };

    d3.selectAll("input")
        .on("input", updateChart);

    updateChart();
</script>
</body>
</html>